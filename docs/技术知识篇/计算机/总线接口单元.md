# 总线接口单元

## 定义

总线上的信号必须与连到总线上的各个部件所产生的信号协调，**起协调作用的控制逻辑**就是**总线接口**，它是**挂接在总线上的部件**与**总线**之间的**连接界面**。

**总线接口单元**是**处在总线部件中**的**实现总线接口功能的那部分逻辑**，它用于**将总线信号接到某个总线部件中**。所以**挂接在总线上的所有部件内部都有一部分逻辑是用于和总线连接的接口单元**。CPU、存储器、I/O模块中都有与系统总线或其他I/O总线的接口。

## 基本功能

每个总线部件中的总线接口单元的功能并不完全相同，这与部件本身的功能、结构、所连接的总线的特性等有关。但从大的方面来说，有一些基本问题需要考虑。

总线接口单元的基本功能如下：

（1）定时和通信。在同步方式下，提供或接收时钟信号，在时钟信号的控制下驱动或采样相应的信号线。在异步方式下，按照握手协议对相应的信号线进行驱动、复位或采样。

（2）总线请求和仲裁。根据需要发出总线请求信号。有些部件的总线接口中包含集中方式下的总线控制器，此时还要进行总线裁决。对于分布式裁决，每个总线接口都要参与裁决过程。

（3）控制操作。提供命令译码等控制逻辑，以便根据总线传送过来的命令，启动总线部件，进行相应的操作。

（4）提供数据缓冲。当总线连接的部件之间有速度差异时，可以在接口中设置一些数据缓冲寄存器，利用这些寄存器使不同速度的部件得到匹配。

（5）数据格式转换。当总线连接的部件之间数据格式不同时，可以通过接口进行数据格式转换。例如，“串—并”转换、“8位—32位”转换等。

（6）记录状态信息。有些接口还必须能够记录接口本身以及它所挂接的设备的状态。例如，接口中数据缓冲寄存器的使用情况等。

（7）数据传送控制。有些接口还要对数据传送过程进行控制。例如，对传输过程中的字计数器进行更新。

（8）中断请求和响应。根据需要发出中断请求信号或接收中断请求并给出响应信号。例如，在外设的总线接口中，当外设需要向处理器请求某种服务时，它通过总线接口向CPU发出中断请求信号。而处理器的总线接口则接收中断请求信号，并给出中断回答信号。

## 分类

根据**总线的数据传输方式**，总线接口单元分为**串行总线接口**和**并行总线接口**两类。