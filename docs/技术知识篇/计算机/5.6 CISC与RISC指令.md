5.6 CISC与RISC指令

1．背景

**随着VLSI技术的迅速发展，计算机的硬件成本不断下降，软件成本不断上升**。为此，人们**在设计指令系统时增加了越来越多功能强大的复杂命令，以便使机器指令的功能接近高级语言语句的功能，给软件提供较好的支持。**

目前，许多计算机的指令系统可包含几百条指令，十多种寻址方式，**这对简化汇编语言设计，提高高级语言的执行效率是有利的。**我们称这些计算机为“复杂指令集计算机”，简称CISC（Complex Instruction Set Computer）。
**使指令系统越来越复杂的出发点有以下三点：**

① 使目标程序得到优化。例如，设置数组运算命令，把原来要用一段程序才能完成的功能，只用一条指令来实现。

② **给高级语言提供更好的支持。**高级语言和一般的机器语言之间有明显的语义差别。改进指令系统，设置一些在语义上接近高级语言语句的指令，可以减轻编译的负担，**提高编译效率**。

③ **提供对操作系统的支持。**操作系统日益发展，其功能也日趋复杂，这就要求指令系统提供越来越复杂的功能。

但是，**复杂的指令系统使计算机的结构也越来越复杂**，这不仅增加了计算机的研制周期和成本，而且难以保证其正确性，有时还可能降低系统的性能。

实践证明，各种指令的使用频率相当悬殊，在如此庞大的指令系统中，**只有算术逻辑运算、数据传送、转移、子程序调用等几十条基本指令是常用的**，它们在程序中出现的概率在80%以上，而**需要大量硬件支持的复杂指令的利用率却很低，这造成了硬件资源的大量浪费**。

前面讲过，**采用CISC技术的原因之一是为了简化编译过程**，但是各种高级语言的语义之间有很大差别，不可能设计出一种能对所有高级语言都能提供很好支持的指令系统。假设改进了某机的指令系统，使之对一种高级语言（如FORTRAN）提供了更好的支持；反过来，该机对另一种高级语言（如COBOL）的支持程度可能就会降低。如果在新机器上采用COBOL，其性能反而不如以前。另外，指令系统越复杂，包含的指令越多，编译时生成目标程序的方法也越多，这往往对最终优化编译造成困难。为解决这个问题，20世纪70年代末人们提出了**便于VLSI实现的精简指令集计算机RISC**（Reduced Instruction Set Computer）。

2．特点

精简指令集计算机的着眼点不是简单地放在简化指令系统上，而是**通过简化指令使计算机的结构更加简单合理，从而提高机器的性能**。与CISC比较，RISC指令系统的主要特点是：

① 指令数目较少，一般都选用使用频度最高的一些简单指令。
② 指令长度固定，指令格式种类少，寻址方式种类少。
③ 大多数指令可在一个机器周期内完成。
④ 通用寄存器数量多，只有存数/取数指令访问存储器，而其余指令均在寄存器之间进行操作。

例如，美国加州大学伯克利分校研制的RISCⅡ机只有39条指令，两种指令格式，寻址方式也只有两种。前面介绍的PowerPC为典型的RISC机，上述特点也非常明显。

采用RISC技术后，由于指令系统简单，CPU的控制逻辑大大简化，芯片上可设置更多的通用寄存器，指令系统也可以采用速度较快的硬连线逻辑来实现，且更适合于采用指令流水技术，这些都可以使指令的执行速度进一步提高。指令数量少，固然使编译工作量加大，但由于指令系统中的指令都是精选的，编译时间少，反过来对编译程序的优化又是有利的。CISC和RISC技术都在发展，两者都有各自的优缺点。但是RISC技术作为一种新的设计思想，无疑对计算机的发展产生了重要影响。

3．CISC与RISC的争论

20世纪70年代中期，IBM公司和美国斯坦福大学、加州大学伯克利分校等机构先后开始对RISC技术进行研究，其成果分别用于IBM，SUN，MIPS等公司的产品中，成为第一代RISC计算机。到了20世纪80年代中期，RISC技术蓬勃发展，广泛使用，并以每年翻番的速度发展，且先后出现了PowerPC，MIPSR4400，MC88000，Super Spare，Intel 0860等高性能RISC芯片以及相应的计算机。这时也同时出现了不少赞美RISC优点的文章，甚至认为非RISC莫属。当然，这也遭遇到计算机结构主流派的反对。这种争论延续了数年，目前早已平息。这是因为，随着速度、芯片密度的不断提高，使RISC系统日趋复杂，而CISC机也由于采用了部分RISC先进技术（如强调指令流水线、分级Cache和多设通用寄存器），其性能更高。