# 总线

在计算机系统中，功能部件之间必须互连。部件之间的互连方式有两种：

* 分散连接：各部件之间通过单独的连线互连
* 总线连接：将各个部件连接到一组公共信息传输线上

总线结构的主要优点：

* 灵活性：它的灵活性体现在新部件可以很容易地加到总线上，并且部件可以在使用相同总线的计算机系统之间互换。
* 成本低：因为一组单独的连线可被多个部件共享，所以总线的性价比高。

总线的主要缺点：它可能产生通信瓶颈。

现代计算机普遍使用总线互连结构。

## 总线的基本概念

计算机由CPU、主存模块和I/O模块组成。计算机的所有功能都是通过CPU周而复始地执行指令实现的。在指令执行过程中，CPU、主存和I/O模块之间要不断地交换数据（包括指令、中断向量等），因此可以说，**计算机所有功能的实现，归根结底是各种信息在计算机内部的各部件之间进行交换的过程**。

**要进行信息交换，必须在部件之间构筑通信线路**，通常把**连接各部件的通路的集合**称为**互连结构**。互连结构有**分散结构和总线结构**两种。

早期的计算机大多采用分散连接方式，相互通信的部件之间都有单独的连线，如果某个部件与其他所有部件都有信息交换，它的内部连线就非常复杂，而且成本高。此外，某一时刻它只能和其他部件中的一个交换信息，在交换信息过程中也必须停止本身的工作。这大大影响系统的工作效率。特别是随着计算机应用领域的不断扩大，I/O设备的种类和数量越来越多，用分散方式无法满足人们随时增减设备的需要，因此出现了总线连接方式。

总线是连接两个或多个功能部件的一组共享的信息传输线，它的主要特征是多个部件共享传输介质。一个部件发出的信号可以被连接到总线上的其他所有部件所接收。总线通常由许多传输线或通路构成，每条线可传输一位二进制信息，若干条线可同时传输多位二进制信息。



## 总线的特性

总线是一个**共享的传输介质**，必须规定其一些基本特性。

（1）物理特性。是指总线在机械物理连接上的特性。包括连线类型、数量、接插件的几何尺寸和形状，以及引脚线的排列等。
从连线的类型来看，总线可分为电缆式、主板式和底板式。电缆式总线通常采用扁平电缆连接电路板；主板式总线通常在印制电路板或卡上蚀刻出平行的金属线，这些金属线按照某种排列以一组连接点的方式提供插槽，系统的一些主要部件从这些槽中插入到系统总线；底板式总线通常是在机箱中设置插槽板，其他功能模块一般都做成一块卡，通过将卡插到槽内连接到系统中。

从连线的数量来看，总线一般分为串行总线和并行总线。在并行传输总线中，按数据线的宽度分8，16，32和64位总线等。总线的宽度对实现的成本、可靠性和数据传输速率的影响很大。一般串行总线用于长距离数据传送，并行总线用于短距离的高速数据传送。

（2）电气特性。是指总线的每一条信号线的信号传递方向、信号的有效电平范围。通常规定，由CPU发出的信号为输出信号，送入CPU的信号为输入信号。地址线一般为输出信号，数据线为双向信号，控制线的每一根都是单向的，有的为输出信号，有的为输入信号。

总线的电平表示方式有两种：单端方式和差分方式。单端电平方式采用一条信号线和一条公共接地线来传递信号，信号线中一般用高电平表示逻辑“1”，低电平表示逻辑“0”。差分电平方式采用一条信号线和一个参考电压比较来互补传输信号，因此一般采用负逻辑，即用高电平表示逻辑“0”，低电平表示逻辑“1”。

例如，串行总线接口标准RS-232C，其电气特性规定，低电平要低于-3V，表示逻辑“1”；高电平要高于+3V，表示逻辑“0”。

（3）功能特性。是指总线中每根传输线的功能。不同的控制线其功能不同，如地址线用来传输地址信息，数据线用来传输数据信息，控制线用来发出控制信息。

（4）时间特性。是指总线中任一根传输线在什么时间内有效，以及每根线产生的信号之间的时序关系。时间特性一般可用信号时序图来说明。

## 总线的分类

计算机系统中含有多种总线，在各个层次上提供部件之间连接和信息交换的通路。**根据所连接部件的不同**，总线通常被分成三种类型：**内部总线、系统总线和通信总线**。

（1）内部总线：指芯片内部连接各元件的总线。例如，CPU芯片内部，在各个寄存器、ALU、指令部件等各元件之间也有总线相连。

（2）系统总线：指**连接CPU、存储器和各种I/O模块等主要部件的总线**。**典型的系统总线有PCI总线、Multibus总线、VME总线**等。由于这些部件通常都制作在插件板卡上，所以连接这些部件的总线一般是主板式或底板式总线。

* **主板式总线是一种板级总线，主要连接主机系统印制电路板中的CPU和主存等部件**，因此也被称为“处理器—主存”总线，有的系统把它称为局部总线或处理器总线。
* **底板式总线通常用于连接系统中的各个功能模块**，实现系统中各个电路板的连接。

（3）通信总线：这类总线用于主机和I/O设备之间或计算机系统之间的通信。由于这类连接涉及许多方面，包括距离远近、速度快慢、工作方式等，差异很大，所以通信总线的种类很多。

