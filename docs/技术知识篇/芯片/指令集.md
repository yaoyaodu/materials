# 指令集

CPU执行计算任务时都需要遵从一定的规范，程序在被执行前都需要先翻译为CPU可以理解的语言。这种规范或语言就是指令集（ISA，Instruction Set Architecture）。

程序被**按照某种指令集的规范**翻译为CPU可识别的**底层代码**的过程叫做编译（compile）。x86、ARM v8、MIPS都是指令集的代号。



指令集体系结构(Instruction Set Architecture, ISA)，简称体系结构或系统结构(architecture),它是**软件和硬件之间接口的一个完整定义**。

ISA定义了一台计算机**可以执行的所有指令的集合**。

**每条指令规定了计算机执行什么操作，所处理的操作数存放的地址空间以及操作数类型**。

指令系统：一台计算机所能执行的全部指令。**指令系统表明一台计算机所具有的硬件功能**。



所谓指令集架构，指的是计算机中央处理器**机器码**所使用的指令的集合以及其背后的寄存器体系、总线设计等逻辑框架。

常见的指令集架构大体上可以分为两大类：复杂指令集体系（CISC）和精简指令集体系（RISC）。

复杂指令集最常见的例子是现在绝大多数家用计算机和网络服务器所使用的 AMD64 指令集。

精简指令集最常见的例子则是常见于智能设备和嵌入式平台的 ARM 指令集家族。除此以外除此以外有一定使用量，和有历史意义的精简指令集还有MIPS、RISC-V、PowerPC、AVR 等等。

精简指令集其精简在于指保留最基本最必要的指令，将复杂功能完全交给上层的软件算法和下层的专用外设去解决。同时精简指令集系统指令寻址方式往往非常单一，除了专门的访存指令以外所有指令都只能在寄存器范围内操作，相应的精简指令集系统普遍使用固定长度指令，也会配备相对比较多的通用寄存器。



ISA规定的内容包括数据类型及格式，指令格式，寻址方式和可访问地址空间的大小，程序可访问的寄存器个数、位数和编号，控制寄存器的定义，I/O空间的编制方式，中断结构，机器工作状态的定义和切换，输入输出结构和数据传送方式，存储保护方式等。

因此，可以看出，指令集体系结构是指软件能够感知到的部分，也称**软件可见部分**。



计算机指令就是**指挥机器工作的指示和命令**，程序就是**一系列按一定顺序排列的指令，执行程序的过程就是计算机的工作过程**。 指令集，就是CPU中用来计算和控制计算机系统的一套指令的集合，而每一种新型的CPU在设计时就规定了一系列与其他硬件电路相配合的指令系统。



指令：指令是指计算机执行某种操作的命令，它由一串二进制数码组成。计算机执行了一指令序列，便可完成预定的任务，这一指令序列就称为程序；
程序：程序是计算机所以指令的集合，称为该计算机的指令系统；
指令的执行过程分为四步：1.取指令；2.分析指令；3.执行指令；4.完成上述操作后，指令计数器加1，为执行下一条指令做准备。



1. 指令是指挥和控制计算机执行某种操作的命令，是一串能被计算机直接识别并执行的二进制代码。一条指令通常由操作码和地址吗两部分组成。
2. 程序：一条条顺序排列的指令组成一段程序。(程序是指令的有序集合。)程序是一段由各种符号组成的语言，这种语言计算机可以读懂，所以是一种计算机语言。
3. 指令系统：一台计算机所能执行的全部指令。**指令系统表明一台计算机所具有的硬件功能**。



**X86架构是目前唯一的主流复杂指令集，垄断个人计算机和服务器处理器市场。**X86架构是英特尔公司在1978年发布。在过去四十多年，x86家族不断壮大，从桌面转战笔记本、服务器、超级计算机。目前，X86架构授权被[英特尔](https://xueqiu.com/S/INTC?from=status_stock_match)、超微半导体（AMD US，无评级）和台湾威盛三家把持。其中，英特尔和AMD的X86处理器在桌面电脑和笔记本市场占据主导地位。据2017年IDC的报告统计，X86处理器在服务器市场占有率也高达96%。根据Mercury Research统计，2019年台湾威盛仅占有0.1%的X86桌面处理器市场份额。



**ARM指令集架构作为目前最成功RISC架构，主导了智能手机和物联网芯片处理器市场。**根据[英伟达](https://xueqiu.com/S/NVDA?from=status_stock_match)公告，基于ARM架构的芯片已累计出货1800亿颗。**ARM架构处理器在智能手机芯片、车载信息芯片、可穿戴设备、物联网微控制器等领域占到90%以上市场份额**。90年代，MIPS和Alpha作为知名RISC在与X86竞争计算机市场中失败，又在错过智能终端高速发展的机遇中走向衰弱。2010年发布的RISC-V作为从发明伊始即以开源为最大特色的RISC ISA受到全球学界、产业界的高度关注。全球顶级学府、科研机构、芯片巨头纷纷参与，各国政府出台政策支持RISC-V的发展和商业化。**RISC-V有望成为X86和ARM之后ISA第三极**。



**在计算机时代，[英特尔](https://xueqiu.com/S/INTC?from=status_stock_match)和AMD等主要处理器厂商研发处理器架构仅供应自家处理器芯片。**作为垄断个人电脑和服务器的X86架构阵营，英特尔和AMD继续延续只为自家处理器芯片设计供应处理器内核的模式。2016年，AMD和中国服务器企业海光合作，授权给海光的Zen架构正是处理器微架构。这个授权物实际就是AMD根据X86架构设计完成的处理器电路，并不是X86指令集架构。即使是以这种IP授权方式的合作，在X86阵营中也是极少的个例。

**在智能移动设备兴起的近20年，以ARM模式为代表的内核微架构IP授权模式兴起。**ARM开发内核微架构后，将它们以IP形式上架出售，芯片厂商以ARM授权的内核为基础设计芯片使用或对外销售。基于ARM精简指令集架构的ARM内核微架构IP选择多样、设计精简可靠、在低功耗领域表现优异，这种授权模式在以手机、平板为代表的移动终端芯片、机顶盒、视频监控等应用媒体芯片等应用为代表移动智能领域获得广泛的成功。**ARM因此也成为移动互联时代的处理器IP授权霸主。**





