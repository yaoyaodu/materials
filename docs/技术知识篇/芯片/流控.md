# 流控

为什么需要流控?

数据在两个串口之间进行通讯的时候常常会出现**丢失数据**的现象，比如两台计算机或者是一台计算机和一个单片机之间进行通讯，**当接收端的数据缓冲区已经满了，这个时候如果还有数据发送过来，因为接收端没有时间进行处理，那这样的数据就有可能会丢失。**在工业现场或者其他领域，经常会遇到这种问题，本质原因是**速度不匹配、处理能力不匹配。**比如单片机的主频只有20M或30M，ARM的处理能力可能是200M，PC机的处理能力是几个G，这种**处理能力的不匹配造成了传输的时候数据容易丢失**。

**硬件流控就是来解决这个速度匹配的问题**。它的基本含义非常简单，**当接收端接收到的数据处理不过来时，就向发送端发送不再接收的信号**，发送端接收到这个信号之后就会停止发送，直到收到可以继续发送的信号再继续发送。**因此流控本身是可以控制数据传输的进度，进而防止数据丢失。**

PC机中常用的两种流控制是硬件流控制(包括RTS/CTS、DTR/DSR等)和软件流控制xon/xoff(继续/停止)。

如果**UART**只有RX、TX两个信号，要流控的话只能是软流控。

如果有RX，TX，CTS，RTS 四个信号，则多半是支持硬流控的UART。

如果有 RX，TX，CTS ，RTS ，DTR，DSR 六个信号的话，RS232标准的可能性比较大。

RS232 中的“RS”是Recommend Standard 的缩写，即”推荐标准“之意，它并不像 IEEE-1284、IEEE-1394 等标准，是由“委员会定制”。

硬件流控制必须将相应的电缆线连上。硬件流控制常用方式为：RTS/CTS（请求发送/清除发送）流控制和DTR/DSR（数据终端就绪/数据设置就绪）流控制。
