# 程序、进程与线程

程序是**一组指令的集合**，它是**静态的实体**，没有执行的含义。

进程是一个**动态的实体**，有自己的**生命周期**。

一般说来，**一个进程肯定与一个程序相对应，并且只有一个**。

但是一个程序可以有多个进程，或者一个进程都没有。

除此之外，进程还有并发性和交往性。

简单地说，**进程是程序的一部分，程序运行的时候会产生进程**。

## 程序

“程序(Program)”是一个**静态**的概念，一般**对应于操作系统中的一个可执行文件**，比如：我们要启动酷狗听音乐，则对应酷狗的**可执行程序**。当我们双击酷狗，则**加载程序到内存中，开始执行该程序，于是产生了“进程”**。

## 进程：执行中的程序

**执行中的程序**叫做进程(Process)，是一个**动态**的概念。现代的操作系统都可以**同时启动多个进程**。

比如：我们在用酷狗听音乐，也可以使用eclipse写代码，也可以同时用浏览器查看网页。进程具有如下特点：

1. 进程是**程序的一次动态执行过程， 占用特定的地址空间**。

2. 每个进程由3部分组成：**cpu、data、code**。每个进程都是独立的，**保有自己的cpu时间，代码和数据**，即便用同一份程序产生好几个进程，它们之间还是拥有自己的这3样东西，这样的缺点是：浪费内存，cpu的负担较重。

3. **多任务(Multitasking)操作系统**将CPU时间动态地划分给每个进程，操作系统同时执行多个进程，每个进程独立运行。以进程的观点来看，它会以为自己独占CPU的使用权。

4. 进程的查看：

- Windows系统: Ctrl+Alt+Del，启动**任务管理器**即可查看所有进程。
- Unix系统: ps or top。

## 线程

**进程可以产生多个线程**。同**多个进程可以共享操作系统的某些资源**一样，**同一进程的多个线程也可以共享此进程的某些资源**(比如：代码、数据)，所以线程又被称为**轻量级进程(lightweight process)**。

1. 一个进程内部的一个执行单元，它是程序中的一个单一的顺序控制流程。

2. 一个进程可拥有多个并行的(concurrent)线程。

3. 一个进程中的**多个线程共享相同的内存单元/内存地址空间**，可以访问相同的变量和对象，而且它们从同一堆中分配对象并进行通信、数据交换和同步操作。

4. 由于线程间的通信是在同一地址空间上进行的，所以**不需要额外的通信机制**，这就使得通信更简便而且信息传递的速度也更快。

5. 线程的启动、中断、消亡，消耗的资源非常少。

## **线程和进程的区别**

1. 每个**进程**都有**独立的代码和数据空间(进程上下文)**，**进程间的切换**会有**较大的开销**。

2. 线程可以看成是轻量级的进程，属于同一进程的线程**共享代码和数据空间**，每个线程有**独立的运行栈和程序计数器(PC)**，线程切换的开销小。

3. 线程和进程最根本的区别在于：**进程是资源分配的单位，线程是调度和执行的单位**。

4. 多进程: 在操作系统中能同时运行多个任务(程序)。

5. 多线程: 在同一应用程序中有多个顺序流同时执行。

6. 线程是进程的一部分，所以线程有的时候被称为轻量级进程。

7. 一个没有线程的进程是可以被看作单线程的，如果一个进程内拥有多个线程，进程的执行过程不是一条线(线程)的，而是多条线(线程)共同完成的。

8. 系统在运行的时候会为每个进程分配不同的内存区域，但是不会为线程分配内存(线程所使用的资源是它所属的进程的资源)，线程组只能共享资源。那就是说，除了CPU之外(线程在运行的时候要占用CPU资源)，计算机内部的软硬件资源的分配与线程无关，线程只能共享它所属进程的资源。





