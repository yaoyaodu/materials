# 硬件相关概念

## 算力

[算力时代已经到来！你还不知道算力是什么？ - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/141840037)

新基建包含三大领域：信息基础设施、融合基础设施、创新基础设施。**以数据中心、智能计算中心为代表的算力基础设施，就包含在信息基础设施当中。**

算力又称计算力，指的是**数据的处理能力**。**它广泛存在于手机、PC、超级计算机等各种硬件设备中，没有算力这些软硬件就不能正常使用。**而算力越高对我们生活的影响也越深刻。

## 差分走线（Differential Wiring）

![查看源图像](https://i.loli.net/2021/08/20/62ojsNhkdZU9Vx1.jpg)

差分传输是一种信号传输的技术，区别于传统的一根信号线一根地线的做法，**差分传输在这两根线上都传输信号**，这两个信号的振幅相同，相位相反。
在这两根线上的传输的信号就是差分信号。信号接收端比较这两个电压的差值来判断发送端发送的逻辑状态。
在电路板上，差分走线必须是等长、等宽、紧密靠近、且在同一层面的两根线。

## 片选

片选：动词，可以理解成**选片**。

举个例子，有很多**芯片**挂在同一总线上（像电脑里很多外设都是挂在总线上），但我们有时候需要对其中特定的某个芯片进行数据、地址或命令的独立传输，此时，我们需要有一个信号来告诉挂在总线上的芯片们，这些数据、地址是传给哪个芯片的。那这样的话，其他芯片就会对这些信号“漠不关心”，而目标芯片就知道这些数据是传给自己的从而做出反应。这个信号就叫做片选信号CS（chip select）或SS(slave select)。

片选这个词即由此而来，指通过设置跳线,利用与门、或门、非门的组合来决定到底是哪几部分进入工作状态。

在数字电路设计中，一般开路输入管脚呈现为高电平，因此片选信号绝大多数情况下是一个低电平。片选信号一般是在划分地址空间时，由逻辑电路产生的。

可编程接口芯片都有一个片选开关，通常以CE(Chip Enable)或CS(Chip Select)表示，只有当该输入端处于有效电平，接口芯片才进入电路工作状态，实现数据的输入输出。片选端通常以AO地址译码器的输出端相连，因此片选也是由指定的AO地址选中该接口芯片，以使其进入电路工作状态的过程。

## 流控

为什么需要流控?

数据在两个串口之间进行通讯的时候常常会出现**丢失数据**的现象，比如两台计算机或者是一台计算机和一个单片机之间进行通讯，**当接收端的数据缓冲区已经满了，这个时候如果还有数据发送过来，因为接收端没有时间进行处理，那这样的数据就有可能会丢失。**在工业现场或者其他领域，经常会遇到这种问题，本质原因是**速度不匹配、处理能力不匹配。**比如单片机的主频只有20M或30M，ARM的处理能力可能是200M，PC机的处理能力是几个G，这种**处理能力的不匹配造成了传输的时候数据容易丢失**。

**硬件流控就是来解决这个速度匹配的问题**。它的基本含义非常简单，**当接收端接收到的数据处理不过来时，就向发送端发送不再接收的信号**，发送端接收到这个信号之后就会停止发送，直到收到可以继续发送的信号再继续发送。**因此流控本身是可以控制数据传输的进度，进而防止数据丢失。**

PC机中常用的两种流控制是硬件流控制(包括RTS/CTS、DTR/DSR等)和软件流控制xon/xoff(继续/停止)。

如果**UART**只有RX、TX两个信号，要流控的话只能是软流控。

如果有RX，TX，CTS，RTS 四个信号，则多半是支持硬流控的UART。

如果有 RX，TX，CTS ，RTS ，DTR，DSR 六个信号的话，RS232标准的可能性比较大。

RS232 中的“RS”是Recommend Standard 的缩写，即”推荐标准“之意，它并不像 IEEE-1284、IEEE-1394 等标准，是由“委员会定制”。

硬件流控制必须将相应的电缆线连上。硬件流控制常用方式为：RTS/CTS（请求发送/清除发送）流控制和DTR/DSR（数据终端就绪/数据设置就绪）流控制。



## 功耗

功耗是所有芯片都要面对的严峻问题。

如果芯片的功耗太大，也就是说热量产生得太快了，又不能及时把热量散出去，那热量就会聚集，芯片的工作温度会急剧上升，芯片就会越来越慢，甚至失效。这也是为什么计算机的风扇如果坏了，就会蓝屏死机的原因。

所以，**现在的芯片使用时一定要配有非常可靠的散热系统，电脑里面一般是用风扇来散热，甚至对于强劲的CPU芯片要有更高级的水冷系统才能保持正常工作**，否则根本就没法运行。

对于大规模的**服务器机房**，**空调制冷的用电量接近甚至已经超过了计算机本身的耗电量**。手机芯片里面低功耗更是最核心的技术要求，所以手机芯片必须要使用最先进的工艺节点来制作，才能保证性能高、功耗低。



## 电源总线、数据总线和地址总线的连接

 来源：微信读书《计算机是如何跑起来的》

### **电路图的读法**

在电路图中，用连接着各种元件符号的直线表示如何布线。电路中有些地方有交叉，但若只是交叉在一起的话，并不表示电路在交叉处构成通路。**只有在交叉处再画上一个小黑点才表示构成通路。**

### 连接电源、数据和地址总线

总线是连接到CPU中数据引脚、地址引脚、控制引脚上的电路的统称。

#### 电源引脚

- VCC（5V）和 GND（0V） 引脚用于为IC供电。连接到各个IC和时钟发生器上。接通电源才可工作。
- 用于给IC供电的VCC引脚和GND引脚上的电压是恒定不变的+5V和0V，但是其他引脚上的电压会随着计算机的操作在+5V和0V之间不断地变化。

#### 地址总线引脚

- 为了**指定输入输出数据时的源头或目的地**，CPU上备有“地址总线引脚”。

#### 数据总线引脚

- 一旦指定了存取数据的地址，就可以使用数据总线引脚进行数据的输入输出了。

#### 时钟信号：

- CPU和PIO的运转离不开时钟信号。为了传输时钟信号，就需要把时钟发生器的8号引脚和CPU的CLK （CLK即Clock，时钟）引脚、PIO的CLK引脚分别连接起来。
- 时钟发生器的8号引脚与+5V之间的电阻用于清理时钟信号。

#### 连接用于区分读写对象是内存还是I/O的引脚：

- CPU上的（即Memory Request，内存请求）引脚和（即I/O Request, I/O请求）引脚
  - 当CPU和内存之间有数据输入输出时，Memory Request引脚上的值是0，反之则是1。
  - 当CPU和I/O之间有数据输入输出时，I/O Request引脚上的值是0，反之则是1。

#### 控制引脚

- CPU、内存、I/O中不但有地址总线引脚、数据总线引脚，还有其他引脚，通常把这些引脚统称为**“控制引脚”，**因为**这些引脚上输入输出的电信号具有控制IC的功能**。
  - 中断引脚：向CPU发出中断请求的引脚
  - 机器周期1（Machine Cycle 1）：用于同步的引脚
  - Reset重置引脚



### 直接存储器访问DMA

使用快动开关可以使Z80 CPU的[插图]引脚（即Bus Request，总线请求）上的值在0和1之间切换。若将该引脚的值设为0，则Z80 CPU从电路中隔离。当处于这种隔离状态时，就可以不通过CPU，手动地向内存写入程序了。像这样不经过CPU而直接从外部设备读写内存的行为叫作DMA（Direct Memory Access，直接存储器访问）。在诸位所使用的个人计算机里，硬盘等设备要读写内存时使用的就是DMA。

![](https://i.loli.net/2021/08/09/TWcv5eN7Qg1mxFn.jpg)
