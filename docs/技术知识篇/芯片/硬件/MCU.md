# MCU

主要来源：[3分钟看懂MCU（附全球53家制造商名单）_应用 (sohu.com)](https://www.sohu.com/a/298859329_257861) 

MCU是Microcontroller Unit 的简称，中文是**微控制器，俗称单片机**，是把CPU的频率与规格做适当缩减，并将内存、计数器、USB、A/D转换、UART、PLC、DMA等周边接口，甚至LCD驱动电路都整合在单一芯片上，形成芯片级的计算机，为不同的应用场合做不同组合控制，诸如手机、PC外围、遥控器，至汽车电子、工业上的步进马达、机器手臂的控制等，都可见到MCU的身影。

## MCU发展历史

单片机出现的历史并不长，但发展十分迅猛。 它的产生与发展和微处理器的产生与发展大体同步，自1971年美国Intel公司首先推出4位微处理器以来，它的发展到目前为止大致可分为5个阶段。下面以Intel公司的单片机发展为代表加以介绍。

**1971年~1976年**

单片机发展的初级阶段。 1971年11月Intel公司首先设计出集成度为2000只晶体管/片的4位微处理器Intel 4004，并配有RAM、 ROM和移位寄存器， 构成了第一台MCS—4微处理器， 而后又推出了8位微处理器Intel 8008， 以及其它各公司相继推出的8位微处理器。

**1976年~1980年**

**低性能单片机阶段**。 以1976年Intel公司推出的MCS—48系列为代表， 采用将8位CPU、 8位**并行I/O接口**、8位定时/计数器、RAM和ROM等集成于一块半导体芯片上的单片结构， 虽然其寻址范围有限（不大于4 KB）， 也**没有串行I/O**， RAM、 ROM容量小， **中断系统也较简单**， 但**功能可满足一般工业控制和智能化仪器、仪表等的需要**。

**1980年~1983年**

**高性能单片机阶段**。 这一阶段推出的高性能8位单片机普遍**带有串行口**，有**多级中断处理系统**， 多个16位定时器/计数器。片内RAM、 ROM的容量加大，且寻址范围可达64 KB，个别片内还带有A/D转换接口。

**1983年~80年代末**

**16位单片机阶段**。 1983年Intel公司又推出了高性能的16位单片机MCS－96系列，由于其采用了最新的制造工艺， 使芯片集成度高达12万只晶体管/片。

**1990年代**

单片机在集成度、功能、速度、可靠性、应用领域等全方位向更高水平发展。

## MCU分类及应用

### 分类

MCU按其**存储器类型**可分为**无片内ROM型**和**带片内ROM**型两种。

- 对于无片内ROM型的芯片，必须外接EPROM才能应用（典型为8031）。
- 带片内ROM型的芯片又分为：
  - 片内EPROM型（典型芯片为87C51）
  - MASK片内掩模ROM型（典型芯片为8051）
  - 片内Flash型（典型芯片为89C51）

按**用途**可分为**通用型**和**专用型**。

根据数据总线的宽度和一次可处理的数据字节长度可分为**8**、**16**、**32位**MCU。

### 应用

目前，国内MCU应用市场最广泛的是**消费电子**领域，其次是**工业领域**、和**汽车电子**市场。

* **消费电子**包括家用电器、电视、游戏机和音视频系统等。
* **工业领域**包括智能家居、自动化、医疗应用及新能源生成与分配等。
* **汽车领域**包括汽车动力总成和安全控制系统等。



## MCU基本功能

任何一款MCU，其基本原理和功能都是大同小异，所不同的只是其外围功能模块的配置及数量、指令系统等。

**对于指令系统，虽然形式上看似千差万别，但实际上只是符号的不同，其所代表的含义、所要完成的功能和寻址方式基本上是类似的。**

对于绝大多数MCU，下列功能是最普遍也是最基本的，针对不同的MCU，其描述的方式可能会有区别，但本质上是基本相同的：

### **Timer(定时器)**

Timer的种类虽然比较多，但可归纳为两大类：

* 一类是**固定时间间隔的Timer，**即其定时的时间是由系统设定的，用户程序不可控制，系统只提供几种固定的时间间隔给用户程序进行选择，如32Hz，16Hz，8Hz等。此类Timer在4位MCU中比较常见，因此可以用来**实现时钟、计时等相关的功能**。

* 另一类则是**Programmable Timer(可编程定时器)，**顾名思义，该类Timer的定时时间是可以由用户的程序来控制的，控制的方式包括：时钟源的选择、分频数(Prescale)选择及预制数的设定等，有的MCU三者都同时具备，而有的则可能是其中的一种或两种。此类Timer应用非常灵活，实际的使用也千变万化，其中最常见的一种应用就是用其**实现PWM输出**。

  由于时钟源可以自由选择，因此，此类Timer一般均与Event Counter(事件计数器)合在一起。

### **IO口**

任何MCU都具有一定数量的IO口，没有IO口，MCU就失去了与外部沟通的渠道。根据IO口的可配置情况，可以分为如下几种类型：

* **纯输入或纯输出口：**此类IO口由MCU硬件设计决定，只能是输入或输出，不可用软件来进行实时的设定。

* **直接读写IO口：**如MCS-51的IO口就属于此类IO口。当执行读IO口指令时，就是输入口。当执行写IO口指令则自动为输出口。

* **程序编程设定输入输出方向的：**此类IO口的输入或输出由程序根据实际的需要来进行设定，应用比较灵活，可以实现一些总线级的应用，如**I2C总线，各种LCD、LED Driver的控制总线**等。

对于IO口的使用，重要的一点必须牢记的是：

* **对于输入口，必须有明确的电平信号，确保不能浮空**(可以通过增加上拉或下拉电阻来实现);
* 对于输出口，其输出的状态电平必须考虑其外部的连接情况，应保证在Standby或静态状态下不存在拉电流或灌电流。

### **外部中断**

外部中断也是绝大多数MCU所具有的基本功能，一般用于信号的实时触发，数据采样和状态的检测。

中断的方式由上升沿、下降沿触发和电平触发几种。

外部中断一般**通过输入口来实现**，若为IO口，则只有设为输入时其中断功能才会开启;若为输出口，则外部中断功能将自动关闭(ATMEL的ATiny系列存在一些例外，输出口时也能触发中断功能)。

外部中断的应用如下：

外部中断一般通过输入口来实现，若为IO口，则只有设为输入时其中断功能才会开启;若为输出口，则外部中断功能将自动关闭(ATMEL的ATiny系列存在一些例外，输出口时也能触发中断功能)。

外部中断的应用如下：

* **外部触发信号的检测：**一种是基于实时性的要求，比如可控硅的控制，突发性信号的检测等，而另一种情况则是省电的需要。

* **信号频率的测量**：为了保证信号不被遗漏，外部中断是最理想的选择。

* **数据的解码：**在遥控应用领域，为了降低设计的成本，经常需要采用软件的方式来对各种编码数据进行解码，如Manchester和PWM编码的解码。

* **按键的检测和系统的唤醒：**对于进入Sleep状态的MCU，一般需要通过外部中断来进行唤醒，最基本的形式则是按键，通过按键的动作来产生电平的变化。

### **通讯接口（SPI，UART，I2C）**

MCU所提供的通讯接口一般包括**SPI接口，UART，I2C接口**等，其分别描述如下：

* **SPI接口：**此类接口是**绝大多数MCU都提供的一种最基本通讯方式**。其**数据传输采用同步时钟来控制，信号包括：SDI(串行数据输入)、SDO(串行数据输出)、SCLK(串行时钟)及Ready信号。**有些情况下则可能没有Ready信号。

  此类接口可以工作在Master方式或Slave方式下，通俗说法就是看谁提供时钟信号，**提供时钟的一方为Master**，相反的一方则为Slave。

* **UART（Universal Asynchronous Receive Transmit）：**属于最基本的一种**异步传输**接口，其**信号线只有Rx和Tx两条**，基本的数据格式为：Start Bit + Data Bit(7-bits/8-bits) + Parity Bit(Even， Odd or None) + Stop Bit(1~2Bit)。一位数据所占的时间称为Baud Rate(波特率)。

  **对于大多数的MCU来讲，数据为的长度、数据校验方式(奇校验、偶校验或无校验)、停止位(Stop Bit)的长度及Baud Rate是可以通过程序编程进行灵活设定。**

  此类接口最常用的方式就是**与PC机的串口进行数据通讯**。

* **I2C接口：**I2C是由Philips开发的一种数据传输协议，同样**采用2根信号来实现**：SDAT(串行数据输入输出)和SCLK(串行时钟)。

  其最大的好处是可以在此总线上挂接多个设备，通过地址来进行识别和访问。I2C总线的一个最大的好处就是非常方便用软件通过IO口来实现，其传输的数据速率完全由SCLK来控制，可快可慢，不像UART接口，有严格的速率要求。

### **Watchdog（看门狗定时器）**

Watchdog也是绝大多数MCU的一种基本配置(一些4位MCU可能没有此功能)。

大多数的MCU的Watchdog只能允许程序对其进行复位而不能对其关闭(有的是在程序烧入时来设定的，如Microchip PIC系列MCU)。而有的MCU则是通过特定的方式来决定其是否打开，如Samsung的KS57系列，只要程序访问了Watchdog寄存器，就自动开启且不能再被关闭。一般而言watchdog的复位时间是可以程序来设定的。

**Watchdog的最基本的应用是为MCU因为意外的故障而导致死机提供了一种自我恢复的能力。**

## MPU与MCU

曾几何时，MPU与MCU就是截然不同的两种器件，MPU是Micro Processor Unit，MCU是Mirco Controller Unit。前者是执行“处理”功能的器件；后者主要完成“控制”相关的任务。

MPU和MCU是为满足不同应用场景而按不同方式优化出来的两类器件。

* MPU注重通过强大的运算/处理能力**执行复杂多样的大型程序**，通常**需要外挂大容量存储器**（如高性能RAM和DDR）。
* MCU通常运行较为单一的任务，**执行对硬件设备的管理/控制功能**，通常不需要很强的运算/处理能力，因此也不需要有大容量的存储器来支撑大程序运行。通常以单片集成的方式在单个芯片内部集成小容量的存储器（如闪存）实现系统的“单片化”。

近年来，由于内存架构的变化，MCU和MPU之间的区别已变得越来越模糊，两者之间是否有明确的界限也不再重要。因为，无论我们将其称为什么，不同应用都有不同要求，最终还是要根据这些要求决定使用哪类器件。

## MCU程序的编写

MCU的程序的编写与PC下的程序的编写存在很大的区别，虽然现在基于C的MCU开发工具越来越流行，但对于一个高效的程序代码和喜欢使用汇编的设计者来讲，汇编语言仍然是最简洁、最有效的编程语言。

对于MCU的程序编写，其**基本的框架**一般分为三大部分：

* **初始化部分**(这是MCU程序设计与PC最大的不同)
* **主程序循环体**
* **中断处理程序**

**初始化：**

对于所有的MCU程序的设计来讲，初始化是最基本也是最重要的一步，一般包括如下内容：

* **屏蔽所有中断并初始化堆栈指针：**初始化部分一般不希望有任何中断发生。
* **清除系统的RAM区域和显示Memory**：虽然有时可能没有完全的必要，但从可靠性及一致性的角度出发，特别是对于防止意外的错误，还是建议养成良好的编程习惯。

* **IO口的初始化：**根据项目的应用的要求，设定相关IO口的输入输出方式，对与输入口，需要设定其上拉或下拉电阻;对于输出口，则必须设定其出世的电平输出，以防出现不必要的错误。

* **中断的设置：**对于所有项目需要用到的中断源，应该给予开启并设定中断的触发条件，而对于不使用的多余的中断，则必须给予关闭。

* **其他功能模块的初始化：**对于所有需要用到的MCU的外围功能模块，必须按项目的应用的要求进行相应的设置，如UART的通讯，需要设定Baud Rate，数据长度，校验方式和Stop Bit的长度等，而对于Programmer Timer，则必须设置其时钟源，分频数及Reload Data等。

* **参数的初始化：**完成了MCU的硬件和资源的出世化后，接下来就是对程序中使用到的一些变量和数据的初始化设置，这一部分的初始化需要根据具体的项目及程序的总体安排来设计。对于一些用EEPROM来保存项目预制数的应用来讲，建议在初始化时将相关的数据拷贝到MCU的RAM，以提高程序对数据的访问速度，同时降低系统的功耗（原则上，访问外部EEPROM都会增加电源的功耗）。



**主程序循环体：**

大多数MCU是属于长时间不间断运行的，因此其主程序体基本上都是以循环的方式来设计，对于存在多种工作模式的应用来讲，则可能存在多个循环体，相互之间通过**状态标志**来进行转换。对于主程序体，一般情况下主要安排如下的模块：

- **计算程序：**计算程序一般比较耗时，因此坚决反对放在任何中断中处理，特别是乘除法运算。

- **显示传输程序：**主要针对存在外部LED、LCD Driver的应用。



**中断处理程序：**

**中断程序主要用于处理实时性要求较高的任务和事件**，如外部突发性信号的检测，按键的检测和处理，定时计数，LED显示扫描等。

一般情况下，中断程序应尽可能保证代码的简洁和短小，对于不需要实时去处理的功能，可以在中断中设置触发的标志，然后由主程序来执行具体的事务――这一点非常重要，特别是对于低功耗、低速的MCU来讲，必须保证所有中断的及时响应。

**对于不同任务体的安排，不同的MCU其处理的方法也有所不同。**

例如，对于低速、低功耗的MCU(Fosc=32768Hz)应用，考虑到此类项目均为手持式设备和采用普通的LCD显示，对按键的反应和显示的反应要求实时性较高，应此一般采用定时中断的方式来处理按键的动作和数据的显示；而对于高速的MCU，如Fosc》1MHz的应用，由于此时MCU有足够的时间来执行主程序循环体，因此可以只在相应的中断中设置各种触发标志，并将所有的任务放在主程序体中来执行。

在MCU的程序设计中，还需要特别注意的一点就是：要防止在中断和主程序体中同时访问或设置同一个变量或数据的情况。有效的预防方法是，将此类数据的处理安排在一个模块中，通过判断触发标志来决定是否执行该数据的相关操作；而在其他的程序体中(主要是中断)，对需要进行该数据的处理的地方只设置触发的标志。――这可以保证数据的执行是可预知和唯一的。

## MCU制造商

### **欧美地区**

**1、Freescale+NXP（飞思卡尔+恩智浦）：**荷兰，主要提供16位、32位MCU。应用范围：汽车电子、LED和普通照明、医疗保健、多媒体融合、家电和电动工具、楼宇自动化技术电机控制、电源和功率转换器、能源和智能电网、自动化、计算机与通信基础设施。

**2、Microchip+Atmel（微芯科技+爱特梅尔）：**美国，主要提供16位、32位MCU。应用范围：汽车电子、工业用、电机控制、汽车、楼宇自动化、家用电器、家庭娱乐、工业自动化、照明、物联网、智能能源、移动电子设备、计算机外设。

**3、Cypress+Spansion（赛普拉斯+飞索半导体）：**美国，主要提供8位、16位、32位MCU。应用范围：汽车电子、家用电器、医疗、消费类电子、通信与电信、工业、无线。

**4、ADI（亚德诺半导体）：**美国，主要提供8位、16位、32位MCU。应用范围：航空航天与国防、汽车应用 、楼宇技术 、通信 、消费电子 、能源 、医疗保健 、仪器仪表和测量 、电机、工业自动化 、安防。

**5、Infineon（英飞凌）：**德国，主要提供16位、32位MCU。应用范围：汽车电子、消费电子、工程、商用和农用车辆、数据处理、电动交通、工业应用、医疗设备、移动设备、电机控制与驱动、电源、面向摩托车电动自行车与小型电动车、智能电网、照明、太阳能系统解决方案、风能系统解决方案。

**6、ST Microelectronics（意法半导体**）：意大利/法国，主要提供32位MCU。应用范围：LED和普通照明、交通运输、医疗保健、多媒体融合、家电和电动工具、楼宇自动化技术电机控制、电源和功率转换器、能源和智能电网、自动化、计算机与通信基础设施。

**7、Qualcomm（高通）：**美国，主要提供16位，32位MCU。应用范围：智能手机、平板电脑、无线调制解调器。

**8、Texas Instruments（德州仪器）：**美国，主要提供16位、32位MCU。应用范围：汽车电子、消费电子、医疗设备、移动设备、通信。

**9、Maxim（美信）：**美国，主要提供32位MCU。应用范围：汽车电子、消费电子、工业应用、安防。

### **日韩地区**

**1、Renesas（瑞萨）：**日本，主要提供16位、32位MCU。应用范围：电脑及外设、消费类电子、健康医疗电子、汽车电子、工业、通信。

**2、Toshiba（东芝）：**日本，主要提供16位、32位MCU。应用范围：汽车电子、工业用、电机控制、无线通信、移动电话、电脑与周边设备、影像及音视频、消费类(家电)、LED照明、安全、电源管理、娱乐设备。

**3、Fujitsu（富士通）：**日本，主要提供32位MCU。应用范围：汽车、医疗、机械，家电。

**4、Samsung Electronics（三星电子）**：韩国，主要提供16位、32位MCU。应用范围：汽车电子、工业用、电机控制、汽车、楼宇自动化、家用电器、家庭娱乐、工业自动化、照明、物联网、智能能源、移动电子设备、计算机外设。

### **台湾地区**

**1、宏晶科技：**台湾，主要提供32位MCU。应用范围：通信、工业控制、信息家电、语音。

**2、盛群半导体：**台湾，主要提供8位、32位MCU。应用范围：消费电子、LED照明等。

**3、凌阳科技：**台湾，主要提供8位、16位MCU。应用范围：家庭影音。

**4、中颖电子：**台湾，主要提供4位、8位MCU。应用范围：充电器、移动电源、家电、工业控制。

**5、松翰科技：**台湾，主要提供8位、32位MCU。应用范围：摇控器、智能型充电器、大小系统、电子秤、耳温枪、血压计、胎压计、各类量测及健康器材。

**6、华邦电子：**台湾，主要提供8位、16位MCU。应用范围：车用电子、工业电子、网络、计算机、消费电子、物联网。

**7、十速科技：**台湾，主要提供4位、8位、51位MCU。应用范围：遥控器、小家电。

**8、佑华微电子：**台湾，主要提供4位、8位MCU。应用范围：录音集成电路产品、消费电子、家用产品。

**9、应广科技单片机：**台湾，主要提供4位、8位MCU。应用范围：机械、自动化、家电、机器人。

**10、义隆电子：**台湾，主要提供8位、16位MCU。应用范围：消费电子、电脑、智能手机。

### **大陆地区**

**1、希格玛微电子：**主要提供32位MCU，应用范围：电信、制造、能源、交通、电力等。

**2、珠海欧比特：**主要提供32位MCU，应用范围：航空航天：星箭站船、飞行器;高端工控：嵌入式计算机;舰船控制、工业控制、电力设备、环境监控。

**3、兆易创新：**主要提供32位MCU，应用范围：工业自动化、人机界面、电机控制、安防监控、智能家居、物联网。

**4、晟矽微电子：**主要提供8位、32位MCU，应用范围：小家电、消费类电子、遥控器、鼠标、锂电池、数码产品、汽车电子、医疗仪器及计量、玩具、工业控制、智能家居及安防等领域。

**5、芯海科技：**主要提供16、32位MCU，应用范围：仪器仪表、物联网、消费电子、家电、汽车电子。

**6、联华集成电路：**主要提供8位、16位MCU，应用范围：消费电子、白色家电、工业控制、通信设备、汽车电子、计算机。

**7、珠海建荣：**主要提供8位MCU，应用范围：家用电器 、移动电源。

**8、炬芯科技：**主要提供8位至32位MCU，应用范围：平板电脑、智能家居、多媒体、蓝牙、wifi音频。

**9、爱思科微电子：**主要提供8位、16位MCU，应用范围：消费类芯片、通讯类芯片、信息类芯片、家电。

**10、华芯微电子：**主要提供8位、4位MCU，应用范围：卫星接收器、手机充电器、万年历、多合一遥控器。

**11、上海贝岭（华大半导体控股）：**主要提供8位、16位、32位MCU，应用范围：计算机周边、HDTV、电源管理、小家电、数字家电。

**12、海尔集成电路：**主要提供14位、15位、16位MCU，应用范围：消费电子、汽车电子、工业、智能仪表。

**13、北京君正：**主要提供32位MCU，应用范围：可穿戴式设备、物联网、智能家电、汽车、费类电子、平板电脑。

**14、中微半导体：**主要提供8位MCU，应用范围：智能家电、汽车电子、安防监控、LED照明及景观、智能玩具、智能家居、消费类电子。

**15、神州龙芯集成电路：**主要提供32位MCU，应用范围：电力监控、智能电网、工业数字控制、物联网、智能家居、数据监控。

**16、紫光微电子：**主要提供8位、16位MCU，应用范围：智能家电。

**17、时代民芯：**主要提供32位MCU，应用范围：汽车导航、交通监控、渔船监管、电力电信网络。

**18、华润矽科微电子（华润微旗下公司）：**主要提供8位、16位MCU，应用范围：消费电子、工业控制、家电。

**19、国芯科技：**主要提供32位MCU，应用范围：信息安全领域 、办公自动化领域、通讯网络领域、 信息安全领域。

**20、中天微：**主要提供32位MCU，应用范围：智能手机、数字电视、机顶盒、汽车电子、GPS、电子阅读器、打印机。

**21、华润微电子：**主要提供8位、16位MCU，应用范围：家电，消费类电子、工业自动化控制的通用控制电路。

**22、中颖电子：**主要提供4位、8位、16位、32位MCU，应用范围：家电、电机。

**23、灵动微电子：**主要提供32位，应用范围：电机控制、蓝牙控制、高清显示、无线充、无人机、微型打印机、智能标签、电子烟、LED点阵屏等。

**24、新唐科技：**主要提供8位MCU，应用范围：照明、物联网等。

**25、东软载波：**主要提供8位、32位MCU，应用范围：家电、智能家居、仪器仪表、液晶面板控制器、工业控制等。

**26、贝特莱：**主要提供32位MCU，应用范围：智能家居、工业控制以及消费类产品领域。

**27、笙泉科技：**主要提供8位MCU，应用范围：车用、教育、工控、医疗等中小型显示面板。

**28、航顺芯片：**主要提供8位、32位MCU，应用范围：汽车、物联网等。

**29、复旦微电子：**主要提供16位、32位MCU，应用范围：智能电表、智能门锁等。

**30、华大半导体：**主要提供8位、16位、32位MCU，应用范围：工业控制、智能制造、智慧生活及物联网等。

## 附：国产芯片占有率

![preview](https://i.loli.net/2021/08/31/ZuEnkJCScYrF45g.jpg)
