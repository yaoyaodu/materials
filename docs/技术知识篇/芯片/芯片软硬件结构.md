# 芯片软硬件结构

**软件方面：**芯片上的软件主要包括**Boot代码、操作系统、应用程序以及硬件的firmware**。Boot程序**引导设备的启动**，是**设备加电后在操作系统内核运行之前运行的一段小程序**。通过这段小程序，我们可以**初始化硬件设备、建立内存空间的映射图**，**从而将系统的软硬件环境带到一个合适的状态，以便为最终调用操作系统内核准备好正确的环境。**操作系统（Operating System，简称OS）是**管理和控制计算机硬件与软件资源的计算机程序**，其五大管理功能是：1.处理器管理，主要包括进程的控制、同步、通信和调度。2.存储器管理，主要包括内存的分配、保护和扩充，地址映射。3.设备管理，主要包括设备的分配、处理等。4.文件管理，主要包括文件的存储空间管理，目录管理，文件的读写和保护。5.作业管理，主要包括任务、界面管理，人机交互，语音控制和虚拟现实等。应用处理器上的操作系统有Android、IOS等，不必多说;**基带处理器上则会运行一个RTOS（如Nucleus PLUS）管理整个基带系统上的任务和部件间的通信。**应用程序是为了完成某项或某几项特定任务而被开发**运行于操作系统之上的程序**。应用处理器上，结合操作系统API和库函数，用户可以开发各色应用程序;**基带处理器上则一般只有少量必要的软件支持。**硬件firmware则是简化软件与硬件的交互，让硬件操纵起来更容易。

**硬件方面****主控CPU：**运算和控制核心。**基带芯片**基本构架采用**微处理器+数字信号处理器（DSP）的结构**，**微处理器是整颗芯片的控制中心，会运行一个实时嵌入式操作系统（如Nucleus PLUS），DSP子系统负责基带处理。应用处理器则可能包括多颗微处理器，还有GPU。微处理器是ARM的不同系列的产品（也可以是x86架构），可以是64位或者32位。处理器内部通过“内部总线”将CPU所有单元相连，其位宽可以是8-64位。总线：**计算机的总线按功能可以划分为**数据总线、地址总线和控制总线，分别用来传输数据、数据地址和控制信号。**CPU内部部件由内部总线互联，外部总线则是CPU、内存、输入、输出设备传递信息的公用通道，主机的各个部件通过总线相连接。外部设备通过相应的接口电路再与外部总线相连接，从而形成了**硬件系统**。外部总线通过总线接口单元BLU与CPU内部相连。片上总线标准高级微控制器总线结构AMBA定义了高性能嵌入式微控制器的通信标准。定义了三组总线：AHB（AMBA高性能总线）、ASB（AMBA系统总线）、和APB（AMBA外设总线）。AHB总线用于高性能、高时钟工作频率模块。AHB为高性能处理器、片上内存、片外内存提供接口，同时桥接慢速外设。DMA、DSP、主存等连在AHB上。ASB总线主要用于高性能系统模块。ASB是可用于AHB不需要的高性能特性的芯片设计上可选的系统总线。APB总线用于为慢速外设提供总线技术支持。APB是一种优化的，低功耗的，精简接口总线，可以支持多种不同慢速外设。由于APB是ARM公司最早提出的总线接口，APB可以桥接ARM体系下每一种系统总线。**外设I/O端口和扩展总线：**GPIO通用端口、UART串口、I2C、SPI 、SDIO、USB等，CPU和外扩的芯片、设备以及两颗CPU之间（如基带处理器和应用处理器之间）进行通信的接口。一般来说，芯片都会支持多种接口，并设计通用的软件驱动平台驱动。**存储部件和存储管理设备：**Rom、Ram、Flash及控制器。**处理器系统中可能包含多种类型的存储部件**，如Flash、SRAM、SDRAM、ROM以及用于提高系统性能的Cache等等，不同的芯片会采用不同的存储控制组合。**外设：** 电源和功耗管理、复位电路和watchdog定时复位电路（前者是系统上电运行、后者是Reset或者超时出错运行）、时钟和计数器、中断控制器、DMA、 输入/输出（如键盘、显示器等）、摄像头等。




芯片作用：运算处理，比如cpu ，数据存储，比如闪存。芯片就是利用半导体材料的特性来实现这些功能。
芯片里最基础的结构是晶体管，像这种鳍式场效应晶体管，由不同类型的半导体、绝缘体和金属导体堆叠而成。这些晶体管上方还排布着一层又一层的金属导线，形成**电路结构**，进而实现更复杂的计算。（导体，半导体，绝缘体，金属导线）

沙子，单晶硅，硅锭，晶圆：沙子经过还原、提纯、结晶，可以将其中的**二氧化硅**变成**单晶硅**，纯度能做到 10 万吨仅含 1 克杂质，形成这样的硅锭。再经切割、抛光得到不足 1 毫米厚的薄片，称为晶圆，直径可达 12 英寸，约 30 厘米。
要想在晶圆这块地基上造出鳍式场效应晶体管，所需的工序异常繁多。地基：晶圆**工序：沉积，光刻，刻蚀，**主要包括沉积，比如在晶圆表面沉积一层二氧化硅。然后是光刻。将光刻胶均匀涂抹在晶圆上，上方射下紫外线，经过一层光罩，只允许光线按设计好的图案通过，再经一组透镜光学系统聚焦照到晶圆上的光刻胶，被曝光的部分就会发生化学反应，在后续被溶解、冲洗，以此定义下方的图形。之后还有刻蚀。利用等离子体物理轰击和气体化学反应，那些未被光刻胶覆盖的氧化层会和下方的硅一起被刻蚀掉，形成凸起的结构，也就是鳍式场效应晶体管的「鳍」。