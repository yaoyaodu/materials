# 通过Sphinx生成HTML和PDF

Linux环境：

* 版本：Ubuntu       推荐版本号：18.04。  Sphinx的版本号：1.6.7。

* 执行命令：apt list --installed | grep sphinx  来查看sphinx的版本。  Sphinx版本：每个Ubuntu有对应的Sphinx版本。出问题主要是因为Sphinx版本太高（1.8.5）的问题（docker也能解决，但可能比较麻烦）。所以最好保持版本不要换，换了可能就要修改，比较麻烦。软件版本会差挺多的。

* 执行命令：apt list --installed | grep texlive  来查看latex宏包是否安装成功。

* 需不需要访问外部网络：需要apt的源。apt能安装软件。apt是ubuntu软件包管理的命令。只要能访问源就行。访问一个软件源。

* apt: Linux软件包管理工具。apt是一个命令行实用程序，用于在Ubuntu、Debian和相关Linux发行版上安装、更新、删除和管理deb软件包。apt是为交互使用而设计的。最好在shell脚本中使用apt-get和apt-cache，因为它们在不同版本之间向后兼容，并且有更多选项和功能。大多数apt命令必须以具有sudo权限的用户身份运行。

* 安装Python：Linux环境中一般都自带。

  * Linux 系统是为编程而生的，因此绝大多数的 **Linux 发行版（Ubuntu、CentOS 等）都默认自带了 Python**。有的 Linux 发行版甚至还会自带两个版本的 Python，例如最新版的 Ubuntu 会自带 Python 2.x 和 Python 3.x。

* 安装编辑器：VS code, PyCharm

* [Installing Sphinx](https://www.sphinx-doc.org/en/master/usage/installation.html#windows-other-method) Installing Sphinx for Linux (Debian/Ubuntu): `apt-get install python3-sphinx`

* Sphinx官网：[Welcome — Sphinx documentation (sphinx-doc.org)](https://www.sphinx-doc.org/en/master/index.html)

* Latex packages: https://www.sphinx-doc.org/en/master/usage/builders/index.html#sphinx.builders.latex.LaTeXBuilder

  texlive-latex-recommended

  texlive-fonts-recommended

  tex-gyre (if latex_engine left to default)

  texlive-latex-extra

  latexmk

  fonts-freefont-otf if latex_engine is either 'xelatex' or 'lualatex'.

  

  Changed in version 4.0.0: TeX Gyre fonts now required for 'pdflatex' engine (default).

  Additional packages are needed in some circumstances:

  - texlive-lang-cyrillic for Cyrillic (and also then cm-super if using the default fonts),

  - texlive-lang-greek for Greek (and also then cm-super if using the default fonts),


  - texlive-xetex if latex_engine is 'xelatex',


  - texlive-luatex if latex_engine is 'lualatex',


  - fonts-freefont-otf if latex_engine is either 'xelatex' or 'lualatex'.

  

* Ubuntu系统查看电脑配置(CPU,显卡,内存,硬盘)：
  * 点击左上方activities，点击点点点图标，点击all，双击Settings。点击左侧最下方 Details。电脑配置信息如“**Ubuntu电脑配置信息**”所示。
  * 参考https://jingyan.baidu.com/article/03b2f78c1095c95ea337ae50.html


* 两个IP地址（见图片）：
  * 软件部门Linux环境：172.16.80.17。
  * 公司的VDI：172.161.8.213。
* 传送文件到Linux环境的工具：MobaXterm。如果网络开了权限的话，可以使用mobaxterm、filezilla或者winscp通过sftp上传。
* 安装中文字体和中文输入法。

* 如果用Ubuntu20.04版本：
  * 忘记装texlive-xetex。最好让IT装个xelatex, 怕lualatex有问题。一定要安装：apt install texlive-xetex。然后中英文版本conf.py文件中的latex_engine = 'xelatex'。
  * 中文版本的字体要重新设置下。见图片：Ubuntu20.04版本中文配置文件字体设置。字体在王润帮忙建的那个环境里用的设置方式在IT建的新环境里有问题，可能还是因为软件版本更新了，还是Sphinx版本的问题。所以最好还是保持版本不要换，换了可能就要修改，比较麻烦的。
  * 在conf.py中加一行：master_doc = 'index'
  * 中文版conf.py，生成PDF的时候报warning: no Babel option known for language 'zh_CN'。但生成出来的PDF没有问题。warning不是error,没什么大问题。
  * 安装思源黑体：双击字体文件，点击install即可。
  * 问IT要个sudo, 有了sudo就能自己安装这些东西了。



换行处有红色标记：

```
verbatimvisiblespace
```

When a long code line is split, the last space character from the source code line right before the linebreak location is typeset using this.

Default: `\textcolor{red}{\textvisiblespace}`

![image-20220926144258586](C:\Users\杜瑶瑶\AppData\Roaming\Typora\typora-user-images\image-20220926144258586.png)

有问题可在这个地方查询：

* [verbatim - How does \verb* set the visible space? - TeX - LaTeX Stack Exchange](https://tex.stackexchange.com/questions/448103/how-does-verb-set-the-visible-space)
* [Newest Questions - TeX - LaTeX Stack Exchange](https://tex.stackexchange.com/questions)

